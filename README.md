# ğŸ¾ PetClinic Dev

Spring PetClinic Microservices ì†ŒìŠ¤ ì½”ë“œ ë° CI/CD íŒŒì´í”„ë¼ì¸

## ğŸ›ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API Gateway                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚                     â”‚
    â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Customers  â”‚     â”‚   Visits   â”‚       â”‚    Vets    â”‚
â”‚  Service   â”‚     â”‚  Service   â”‚       â”‚  Service   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                â”‚                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                   â”‚   MySQL     â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§© ì„œë¹„ìŠ¤ êµ¬ì„±

| ì„œë¹„ìŠ¤ | í¬íŠ¸ | ì„¤ëª… |
|--------|------|------|
| config-server | 8888 | ì¤‘ì•™ ì„¤ì • ê´€ë¦¬ |
| discovery-server | 8761 | Eureka ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ |
| api-gateway | 8080 | API ë¼ìš°íŒ… |
| customers-service | 8081 | ê³ ê°/í« ê´€ë¦¬ |
| visits-service | 8082 | ë°©ë¬¸ ê¸°ë¡ ê´€ë¦¬ |
| vets-service | 8083 | ìˆ˜ì˜ì‚¬ ì •ë³´ ê´€ë¦¬ |
| admin-server | 9090 | Spring Boot Admin |

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
â”œâ”€â”€ .github/workflows/ci.yml  # GitHub Actions íŒŒì´í”„ë¼ì¸
â”œâ”€â”€ spring-petclinic-*/       # ê° ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì†ŒìŠ¤
â”œâ”€â”€ docker/                   # Dockerfileë“¤
â”œâ”€â”€ scripts/                  # ë¹Œë“œ/ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ docker-compose.yml        # ë¡œì»¬ ê°œë°œìš©
â””â”€â”€ pom.xml                   # Maven ë£¨íŠ¸ ì„¤ì •
```

## ğŸš€ ë¡œì»¬ ì‹¤í–‰

```bash
# ì „ì²´ ë¹Œë“œ
./mvnw clean install -DskipTests

# Docker Composeë¡œ ì‹¤í–‰
docker-compose up -d

# ê°œë³„ ì„œë¹„ìŠ¤ ì‹¤í–‰
./mvnw spring-boot:run -pl spring-petclinic-config-server
```

## âš™ï¸ CI/CD (GitHub Actions)

`.github/workflows/ci.yml`ì´ í¬í•¨ë˜ì–´ ìˆìœ¼ë©° ë‹¤ìŒ ë‹¨ê³„ë¥¼ ìˆ˜í–‰:

```
Push â†’ ë³€ê²½ ê°ì§€ â†’ Maven ë¹Œë“œ â†’ Docker Build â†’ ECR Push â†’ GitOps ì—…ë°ì´íŠ¸
                                                                    â†“
                                                          ArgoCD ìë™ ë°°í¬
```

### íŒŒì´í”„ë¼ì¸ íë¦„

1. **ë³€ê²½ ê°ì§€** - ìˆ˜ì •ëœ ì„œë¹„ìŠ¤ë§Œ ë¹Œë“œ
2. **Maven ë¹Œë“œ** - Java 17, í…ŒìŠ¤íŠ¸ ìŠ¤í‚µ
3. **Docker Build & ECR Push** - ë ˆì´ì–´ë“œ ì´ë¯¸ì§€
4. **GitOps ì—…ë°ì´íŠ¸** - kustomization.yaml íƒœê·¸ ìˆ˜ì •

### GitHub Secrets ì„¤ì •

| Secret | ìš©ë„ |
|--------|------|
| `AWS_ROLE_ARN` | OIDC ì¸ì¦ìš© IAM Role |
| `GITOPS_TOKEN` | petclinic-gitops ë ˆí¬ ì ‘ê·¼ìš© PAT |

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

| ë¶„ë¥˜ | ê¸°ìˆ  |
|------|------|
| Language | Java 17 |
| Framework | Spring Boot 3.x, Spring Cloud |
| Build | Maven |
| Container | Docker |
| Database | MySQL (RDS) |
| CI/CD | GitHub Actions |
| GitOps | ArgoCD |
| AWS ì¸ì¦ | OIDC (í‚¤ ì—†ìŒ) |